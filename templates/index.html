<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>一覧_書籍情報</title>
        <link rel="stylesheet" href="static/css/index.css">

    </head>

    <body>

        <form method="POST" action="/add_data">
            <p>
                <label>ISBNを入力：</label>
                <input type="text" name="input_isbn">
                <button type="submit">データベースに追加</button><br>
                {% if message %}
                    <p style="color: red;">{{ message }}</p>
                {% endif %}

            </p>
        </form>

        

        <div class="book-grid">
            {% for book in books %}
            <div class="book-card">
                {% set img = build_image_src(book['image_path']) %}
                <a href="{{ url_for('book_by_isbn', isbn=book.isbn) }}">
                    {% if img %}
                        <img src="{{ img }}" alt="{{ book['title'] }} の書影" style="max-height:250px">
                    {% endif %}
                    <br>
                    {{ book["title"] }}
                    <form method="POST" action="/delete_data">
                            <input type="hidden" name="delete_data" value="{{ book.isbn }}">
                            <button type="submit">削除</button>
                    </form>
                </a>
            </div>
        {% endfor %}
        </div>
    </body>
</html>
